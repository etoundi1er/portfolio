tinymce.PluginManager.add("fullscreen",function(e){function t(){var e,t,n=window,i=document,c=i.body;return c.offsetWidth&&(e=c.offsetWidth,t=c.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}}function n(){var e=tinymce.DOM.getViewPort();return{x:e.x,y:e.y}}function i(e){scrollTo(e.x,e.y)}function c(){function c(){h.setStyle(g,"height",t().h-(m.clientHeight-g.clientHeight))}var f,m,g,w,C=document.body,v=document.documentElement;a=!a,m=e.getContainer(),f=m.style,g=e.getContentAreaContainer().firstChild,w=g.style,a?(u=n(),l=w.width,o=w.height,w.width=w.height="100%",s=f.width,d=f.height,f.width=f.height="",h.addClass(C,"mce-fullscreen"),h.addClass(v,"mce-fullscreen"),h.addClass(m,"mce-fullscreen"),h.bind(window,"resize",c),c(),r=c):(w.width=l,w.height=o,s&&(f.width=s),d&&(f.height=d),h.removeClass(C,"mce-fullscreen"),h.removeClass(v,"mce-fullscreen"),h.removeClass(m,"mce-fullscreen"),h.unbind(window,"resize",r),i(u)),e.fire("FullscreenStateChanged",{state:a})}var l,o,r,s,d,u,a=!1,h=tinymce.DOM;return e.settings.inline?void 0:(e.on("init",function(){e.addShortcut("Meta+Alt+F","",c)}),e.on("remove",function(){r&&h.unbind(window,"resize",r)}),e.addCommand("mceFullScreen",c),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Alt+F",selectable:!0,onClick:function(){c(),e.focus()},onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Meta+Alt+F",onClick:c,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return a}})});